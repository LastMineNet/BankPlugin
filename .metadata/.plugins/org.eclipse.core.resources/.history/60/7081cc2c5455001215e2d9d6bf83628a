package net.lastmine.BankPlugin.listener;

import java.util.ArrayList;
import java.util.List;

import org.bukkit.block.Sign;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.Action;
import org.bukkit.event.player.PlayerInteractEvent;
import org.bukkit.plugin.Plugin;

public class PlayerInteract implements Listener {

	static List<String> AmoutListIn = new ArrayList<String>();
	public static Plugin pl = null;
	@EventHandler
	public void onPlayerInteract(final PlayerInteractEvent e){
		if(e.getAction() == Action.RIGHT_CLICK_BLOCK){
			if(e.getClickedBlock().getState() instanceof Sign){
				Sign s = (Sign)e.getClickedBlock().getState();
			}
		}
		if(e.getAction() == Action.LEFT_CLICK_BLOCK){
			if(e.getClickedBlock().getState() instanceof Sign){
				Sign s = (Sign)e.getClickedBlock().getState();
				if(s.getLine(0).equalsIgnoreCase("§8[§3Bank§8]")){
					if(e.getPlayer().hasPermission("bp.sign.use")){
						e.getPlayer().sendMessage("§8[§3BankPlugin§8] §4Bitte gib den Betrag jetzt in den Chat ein!");
						AmoutListIn.add(e.getPlayer().getName());
						pl.getServer().getScheduler().scheduleSyncDelayedTask(pl, new Runnable(){

							@Override
							public void run() {
								AmoutListIn.remove(e.getPlayer().getName());
								e.getPlayer().sendMessage("§8[§3BankPlugin§8] §4Ab jetzt kannst den Betrag nichtmehr eingeben!");
								
							}
							
						}, 1200L);
					} else {
						e.getPlayer().sendMessage("§8[§3BankPlugin§8] §4Du hast keine Permission für diese Aktion");
					}
				}
			}
		}
	}
}
